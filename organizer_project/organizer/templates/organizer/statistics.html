{% extends 'organizer/base.html' %}
{% load static %}

{% block _title %}Statistics{% endblock %}

{% block extra_css %}
{% endblock %}

{% block content %}
<main class="bg-color-main">

  <h3 class="center-align">Your balance: {{user.profile.balance}}</h3>
    
    <div class="row">
        <div class="col s12 m6">

         <ul class="collapsible" data-collapsible="accordion">
            <li>
              <div class="collapsible-header">
                <p class="header-collapse-txt">Last week: {{amount_weekly}}</p>
              </div>
              <div class="collapsible-body">

                    <canvas id="myChartWeek" width="300" height="200"></canvas>

              </div>
            </li>
          </ul>

            
        </div>
        <div class="col s12 m6">    
            <ul class="collapsible" data-collapsible="accordion">
            <li>
              <div class="collapsible-header">
                <p class="header-collapse-txt">Today: {{amount_daily}}</p>
              </div>
              <div class="collapsible-body">

                    <canvas id="myChartDay" width="300" height="200"></canvas>

              </div>
            </li>
          </ul>
        </div>
    </div>
    <div class="row">
        <div class="col s12 m6">
            <ul class="collapsible" data-collapsible="accordion">
            <li>
              <div class="collapsible-header">
                <p class="header-collapse-txt">Last month: {{amount_monthly}}</p>
              </div>
              <div class="collapsible-body">

                    <canvas id="myChartMonth" width="300" height="200"></canvas>

              </div>
            </li>
          </ul>
        </div>
        <div class="col s12 m6">    
          <ul class="collapsible" data-collapsible="accordion">
            <li>
              <div class="collapsible-header">
                <p class="header-collapse-txt">All time: {{amount_all}}</p>
              </div>
              <div class="collapsible-body">

                    <canvas id="myChartAll" width="300" height="200"></canvas>

              </div>
            </li>
          </ul>
        </div>
    </div>

</main>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script src="{% static "organizer/js/navbar_buttons.js" %}"></script>
<script> var myChart; var opt = 'bar';</script> 
<script>
var ctx = document.getElementById("myChartAll");
var myChart = new Chart(ctx, {
    type: opt,
    data: {
        labels: ["Apparel", "Entertainment", "Food", "Cosmetics", "Computer/Mobile", "Books/Newspapers", "Other"],
        datasets: [{
            label: 'Amount',
            data: [{{cat_app_all}}, {{cat_ent_all}}, {{cat_food_all}}, {{cat_skin_all}},
                    {{cat_comp_all}}, {{cat_book_all}}, {{cat_oth_all}}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)'
            ],

            borderWidth: 1
        }]
    },
});

var ctx2 = document.getElementById("myChartMonth");
var myChart = new Chart(ctx2, {
    type: 'bar',
    data: {
        labels: ["Apparel", "Entertainment", "Food", "Cosmetics", "Computer/Mobile", "Books/Newspapers", "Other"],
        datasets: [{
            label: 'Amount',
            data: [{{cat_app_30}}, {{cat_ent_30}}, {{cat_food_30}}, {{cat_skin_30}},
                    {{cat_comp_30}}, {{cat_book_30}}, {{cat_oth_30}}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)'
            ],

            borderWidth: 1
        }]
    },
});

var ctx3 = document.getElementById("myChartWeek");
var myChart = new Chart(ctx3, {
    type: 'bar',
    data: {
        labels: ["Apparel", "Entertainment", "Food", "Cosmetics", "Computer/Mobile", "Books/Newspapers", "Other"],
        datasets: [{
            label: 'Amount',
            data: [{{cat_app_7}}, {{cat_ent_7}}, {{cat_food_7}}, {{cat_skin_7}},
                    {{cat_comp_7}}, {{cat_book_7}}, {{cat_oth_7}}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)'
            ],

            borderWidth: 1
        }]
    },
});

var ctx4 = document.getElementById("myChartDay");
var myChart = new Chart(ctx4, {
    type: 'bar',
    data: {
        labels: ["Apparel", "Entertainment", "Food", "Cosmetics", "Computer/Mobile", "Books/Newspapers", "Other"],
        datasets: [{
            label: 'Amount',
            data: [{{cat_app_24}}, {{cat_ent_24}}, {{cat_food_24}}, {{cat_skin_24}},
                    {{cat_comp_24}}, {{cat_book_24}}, {{cat_oth_24}}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)'
            ],

            borderWidth: 1
        }]
    },
});
</script>
{% endblock %}